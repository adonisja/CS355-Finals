import React, {UseEffect, useState } from 'react';
import { View,Text, FlatList, StyleSheet, ActivityIndicator, TextInput, TouchableOpacity } from 'react-native';
import * as FileSystem from 'expo-file-system';
import * as SQLite from 'expo-sqlite';
import { Asset } from 'expo-asset';
import { useRoute } from '@react-navigation/native';

const DB_NAME = 'imbd.db';
const DB_ASSET = require('../assets/imbd.db');

async function openDB() {
  const dir = `${FileSystem.documentDirectory}SQLite/`;
  const path = '${dir}/${DB_NAME}';
  await FileSystem.makeDirectoryAsync(dir, { intermediates: true });
  const info = await FileSystem.getInfoAsync(path);
  if (!info.exists) {
    const asset = Asset.fromModule(DB_ASSET);
    const asset.downloadAsync();
    await FileSystem.copyAsync({ asset.localUri, to: path });
  }

  return SQLite.openDatabaseAsync(DB_Name);
}
